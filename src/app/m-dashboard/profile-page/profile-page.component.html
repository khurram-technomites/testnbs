<section class="">
    <div class="flex flex-col items-center my-5 relative xl:my-0">
        <img [src]="profileImage" alt="" onerror="this.onerror=null; this.src='./assets/images/broken-img.jpg'"
            class="rounded-full h-24 w-24 flex items-center justify-center bg-gray-300 p-[2px]">
        <p class="my-2 font-Inter text-sm font-bold">Hi, {{customer}}</p>
        <input type="file" class="hidden" #profileImageField id="profileImageFieldid">
        <fa-icon [icon]="faCamera"
            class="text-xs mr-2 absolute top-0 right-[156px] bg-gk-red text-white w-6 h-6 flex justify-center items-center rounded-full cursor-pointer sm:right-[19.6rem] md:right-[20.6rem] lg:right-[28.6rem] xl:right-[24rem]"
            (click)="getProfileImage(profileImageField)"></fa-icon>
    </div>
</section>

<section class="px-5 md:px-32">
    <form #UserProfile="ngForm" (ngSubmit)="UserProfileUpdate(UserProfile.value)">
        <div class="flex flex-col ">
            <div class="flex flex-col xl:flex-row">
                <input type="text" placeholder='{{"DashboardPage.Profile.FirstName" | translate}}'
                    class="my-2 font-Inter text-xs w-full mr-4 bg-transparent border-0 border-b border-[#191919]/20 text-[#989898] placeholder:text-[#989898]"
                    [(ngModel)]="firstName" name="firstName">

                <input type="text" placeholder='{{"DashboardPage.Profile.LastName" | translate}}'
                    class="my-2 font-Inter text-xs w-full bg-transparent border-0 border-b border-[#191919]/20 text-[#989898] placeholder:text-[#989898]"
                    [(ngModel)]="lastName" name="lastName">
            </div>
            <div class="flex flex-col xl:flex-row">
                <input type="text" placeholder='{{"DashboardPage.Profile.Email" | translate}}'
                    class="my-2 font-Inter text-xs w-full mr-4 bg-transparent border-0 border-b border-[#191919]/20 text-[#989898] placeholder:text-[#989898]"
                    [(ngModel)]="email" name="email">
                <div class="flex items-center">
                    <input type="text" placeholder='971'
                    class="my-2 font-Inter text-xs bg-transparent border-0 border-b border-[#191919]/20 text-[#989898] placeholder:text-[#989898] w-[35px] pr-0" readonly>
                    
                    <input type="text" placeholder='{{"DashboardPage.Profile.Phone" | translate }}'
                    class="my-2 font-Inter text-xs w-full bg-transparent border-0 border-b border-[#191919]/20 text-[#989898] placeholder:text-[#989898] pl-0"
                    [(ngModel)]="phone" name="phone" maxlength="9" (keypress)='restrictAlphabets($event)'>
                </div>
            </div>
            <div class="flex flex-col xl:flex-row">
                <select name="Countries" id="" placeholder="Country"
                    class="my-2 font-Inter text-xs w-full mr-4 bg-transparent border-0 border-b border-[#191919]/20 text-[#989898] placeholder:text-[#989898]">
                    <option *ngFor="let country of countries" value="{{country.id}}">{{country.name}}</option>
                </select>

                <select name="cities" id="" placeholder="State"
                    class="my-2 font-Inter text-xs w-full bg-transparent border-0 border-b border-[#191919]/20 text-[#989898] placeholder:text-[#989898]">
                    <option *ngFor="let city of cities" value="{{city.id}}">{{city.name}}</option>
                </select>
            </div>

            <input type="text" placeholder='{{"DashboardPage.Profile.Address" | translate}}'
                class="my-2 font-Inter text-xs bg-transparent border-0 border-b border-[#191919]/20 text-[#989898] placeholder:text-[#989898]" [(ngModel)]="address"
                name="address">
            <button
                class="bg-gk-red justify-center inline-flex px-4 py-3 my-4 font-Inter w-full rounded-lg text-white transition ease-in-out duration-150 cursor-pointer disabled:opacity-75 disabled:bg-[#4C8EC7]/80 disabled:cursor-not-allowed">
                <svg *ngIf="UpdateProfileStatus==false" class="animate-spin -ml-1 mr-2 h-5 w-5 text-white"
                    xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4">
                    </circle>
                    <path class="opacity-75" fill="currentColor"
                        d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                    </path>
                </svg>
                {{"DashboardPage.Profile.Update" |
                translate}}
            </button>
        </div>
    </form>
</section>

<section *ngIf="ShowOTP">
    <div class="bg-black/50 fixed inset-0 flex justify-center items-center z-50">
        <div class=" bg-white w-[80%] rounded-lg sm:w-[30%] md:w-[40%] xl:w-[25%]">
            <div class="p-4">
                <svg class="h-5 w-5 cursor-pointer" viewBox="0 0 20 20" fill="currentColor" (click)="ShowOTP = false">
                    <path fill-rule="evenodd"
                        d="M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z"
                        clip-rule="evenodd" />
                </svg>
            </div>
            <div class="flex flex-col justify-center">
                <img src="./assets/images/logo-for-white-bg.svg" alt=""
                    onerror="this.onerror=null; this.src='./assets/images/broken-img.jpg'"
                    class="-mt-12 w-[130px] mx-auto">
                <div class="font-Inter font-semibold flex flex-col items-center justify-center capitalize w-full">
                    <h1 class="pt-4 text-gk-red text-lg">Verify</h1>
                    <p class="text-xs text-black/40 mt-2 px-10 text-center">{{"LoginPage.CodeSent" | translate}}</p>
                    <p class="text-xs text-black font-semibold pb-4">{{SignupContact}}</p>
                </div>
                <!-- OTP -->
                <form class="w-[90%] mx-auto " #OTPverify="ngForm" (ngSubmit)="SendOTP(OTPverify.value)">
                    <div class="font-Inter text-xs font-semibold flex flex-wrap my-4">
                        <input type="text"
                            class="border-0 border-b border-black/40 p-0 text-2xl py-2 
                        w-[22%] mr-2 text-center font-bold focus:shadow-none focus:border-b-4 focus:border-gk-red focus:ring-0"
                            placeholder="5" maxlength="1" (keyup)="keytest($event)" required ngModel name="OTP1">

                        <input type="text"
                            class="border-0 border-b border-black/40 p-0 text-2xl py-2 
                        w-[22%] mr-2 text-center font-bold focus:shadow-none focus:border-b-4 focus:border-gk-red focus:ring-0"
                            placeholder="5" maxlength="1" (keyup)="keytest($event)" required ngModel name="OTP2">

                        <input type="text"
                            class="border-0 border-b border-black/40 p-0 text-2xl py-2 
                        w-[22%] mr-2 text-center font-bold focus:shadow-none focus:border-b-4 focus:border-gk-red focus:ring-0"
                            placeholder="5" maxlength="1" (keyup)="keytest($event)" required ngModel name="OTP3">

                        <input type="text"
                            class="border-0 border-b border-black/40 p-0 text-2xl py-2 
                        w-[22%] mr-2 text-center font-bold focus:shadow-none focus:border-b-4 focus:border-gk-red focus:ring-0"
                           placeholder="5" maxlength="1" (keyup)="keytest($event)" required ngModel name="OTP4">
                    </div>

                    <button
                        class="bg-gk-red text-white font-semibold w-full rounded-lg py-2 cursor-pointer disabled:opacity-75 disabled:bg-[#4C8EC7]/80 disabled:cursor-not-allowed"
                        [disabled]=!OTPverify.valid>{{"LoginPage.Verify" | translate}}</button>

                    <p class="font-Inter capitalize text-black/40 font-semibold text-center text-xs mt-10">
                        {{"LoginPage.CodeValid" | translate}}
                    </p>
                    <div class="flex items-center justify-center font-Inter text-xs font-bold capitalize mb-4">
                        <p class="font-Inter capitalize text-black text-center text-xs my-2 mr-2" *ngIf="!isTimeOut">
                            {{showOPTcounter}}</p>
                        <a class="font-Inter capitalize text-gk-red text-center text-xs my-2 cursor-pointer"
                            *ngIf="isTimeOut" (click)="reSendOTP();">{{"LoginPage.ResendCode" | translate}}</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>